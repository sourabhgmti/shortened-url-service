# Getting Started

### Table of Contents
* Description
* Reference Documentation
* Working with dockerfile

Shortened URL Application
=============================
Description
----------------
Most of us are familiar with seeing URLs like bit.ly or t.co on our Twitter or Facebook
feeds. These are examples of shortened URLs, which are a short alias or pointer to a
longer page link. For example, I can send you the shortened
URL http://bit.ly/SaaYw5 that will forward you to a very long Google URL with search
results on how to iron a shirt.

### Reference Documentation

1. Tools :

    a. `IDE : Intellij`

    b. `Java : 1.8`

    c. `Gradle : 7.1.1`


3. Set "develop" as active profile for debug mode.


   1. Endpoints are as follows :
   
       a. POST : http://localhost:8080/shortened-url-service/url/short
   
   
        Request  :
           {
             "url":"https://www.independent.co.uk/life-style/fashion/how-iron-shirt-creases-jeeves-dry-cleaners-a8857046.html"
           }
   
        Response :
          {
            "url": "https://www.independent.co.uk/life-style/fashion/how-iron-shirt-creases-jeeves-dry-cleaners-a8857046.html",
            "shortenedUrl": "http://localhost:8080/shortened-url-service/url/DESKTOP-KMGDPMC-1627968794442-1627968939646-0"
          }
   
   4. GET : http://localhost:8080/shortened-url-service/url/DESKTOP-KMGDPMC-1627968794442-1627968939646-0
      

      Description : This is a shortened url endpoint that is generated by 1st endpoint above that would redirect to its actual url 
      (https://www.independent.co.uk/life-style/fashion/how-iron-shirt-creases-jeeves-dry-cleaners-a8857046.html)
  
   5. GET : http://localhost:8080/shortened-url-service/url/DESKTOP-KMGDPMC-1627968794442-1627968939646-0/stat
      

      Response :

      {
      "url": "https://www.independent.co.uk/life-style/fashion/how-iron-shirt-creases-jeeves-dry-cleaners-a8857046.html",
      "shortenedUrl": "http://localhost:8080/shortened-url-service/url/DESKTOP-KMGDPMC-1627968794442-1627968939646-0",
      "createdOn": "8/3/21 11:05 AM",
      "totalNumberOfHits": "1",
      "lastAccessedOn": "8/3/21 11:08 AM"
      }

Working with dockerfile
----------------------------
1. Make sure that you have docker desktop is installed on your machine.


2. Switch to linux container


3. Open docker desktop dashboard, go to setting tab and enable "Expose daemon on tcp://localhost:2375 without TLS"


4. Open Windows PowerShell and check if you can execute : docker images (If you are able to execute this command then then all set and we are good to go.)


5. Go to working directory from Windows PowerShell. For example : 
   PS E:\StudyWorkspace\shortened-url-service>


6. Build docker image as below :

   `docker build . -t sourabhgmti/shortened-url-service:latest`


7. You can check if image is pushed into local repository with the help of following command :
   `docker images`
   
   for example output :

   PS E:\StudyWorkspace\shortened-url-service> docker images


   `REPOSITORY              TAG       IMAGE ID       CREATED          SIZE`

   `sourabhgmti/shortened-url-service   latest    c5c4810b444e   47 minutes ago   153MB`

8. Now run docker images :

   `docker run -d --name shortened-url-app -p 8080:8080 -t sourabhgmti/shortened-url-service`


    Now our application is up and running as a container and can be checked by executing endpoints that we exposed. For example :
    POST : http://localhost:8080/shortened-url-service/url/short

  docker run command output :

  `PS E:\StudyWorkspace\shortened-url-service> docker run -d --name shortened-url-app -p 8080:8080 -t sourabhgmti/shortened-url-service
  c5c4810b444e72eaef18cabd70b5e4d403825f919903ae8a384821e34bba5222`

9. We can verify docker container with command :


    docker container list

    for example :

    PS E:\StudyWorkspace\shortened-url-service> docker container  list
    CONTAINER ID   IMAGE                                     COMMAND                  CREATED         STATUS         PORTS                                       NAMES
    c5c4810b444e   sourabhgmti/shortened-url-service   "java -Dspring.profiâ€¦"   8 seconds ago   Up 4 seconds   0.0.0.0:8080->8080/tcp, :::8080->8080/tcp   shortened-url-app

10. Application logs can be checked using command :

   ` docker container  logs c5c4810b444e`

11. To login into container we have :

   ` docker exec -it shortened-url-app sh`

12. we can push docker image with following command :


    docker push <hub-user>/<repo-name>:<tag>

    for example :
    docker push sourabhgmti/shortened-url-service:latest`

13. We can pull this image as well like below : 

    `docker pull sourabhgmti/shortened-url-service:latest`
    



   
